{
  "version": 3,
  "sources": ["../../@hyperledger/aries-oca/build/formatters/Credential.js"],
  "sourcesContent": ["import { CredentialPreviewAttribute, } from '@aries-framework/core';\nexport class LocalizedCredential {\n    #bundle;\n    issuer;\n    name;\n    attributes;\n    constructor(bundle, record, language) {\n        if (!language) {\n            throw new Error('language is required');\n        }\n        this.#bundle = bundle;\n        this.issuer = bundle.metadata.issuer?.[language];\n        this.name = bundle.metadata.name?.[language];\n        // If no record attributes are present then grab default attributes from the bundle\n        const credentialAttributes = record.credentialAttributes?.length\n            ? record.credentialAttributes\n            : bundle.attributes.map((attribute) => {\n                return new CredentialPreviewAttribute({ ...attribute, value: '' });\n            });\n        this.attributes =\n            credentialAttributes\n                ?.filter((attribute) => bundle.getFlaggedAttribute(attribute.name))\n                .map((attribute) => {\n                const overlayOptions = bundle.getAttribute(attribute.name) ?? { name: attribute.name, type: '' };\n                return new DisplayAttribute(attribute, overlayOptions, language);\n            }) ?? [];\n    }\n    get primaryAttribute() {\n        const name = this.#bundle.branding?.primaryAttribute;\n        return this.getAttribute(name);\n    }\n    get secondaryAttribute() {\n        const name = this.#bundle.branding?.secondaryAttribute;\n        return this.getAttribute(name);\n    }\n    getAttribute(attributeName) {\n        if (!attributeName) {\n            return undefined;\n        }\n        return this.attributes.find((attribute) => attribute.name === attributeName);\n    }\n}\nexport class DisplayAttribute extends CredentialPreviewAttribute {\n    characterEncoding;\n    standard;\n    format;\n    information;\n    label;\n    constructor(options, overlayOptions, language) {\n        super(options);\n        this.characterEncoding = overlayOptions.characterEncoding;\n        this.standard = overlayOptions.standard;\n        this.format = overlayOptions.format;\n        this.information = overlayOptions.information?.[language];\n        this.label = overlayOptions.label?.[language];\n    }\n    toJSON() {\n        return { ...super.toJSON(), format: this.format, information: this.information, label: this.label };\n    }\n}\nexport class CredentialFormatter {\n    #credentials;\n    constructor(bundle, record) {\n        this.#credentials = bundle.languages.reduce((credentials, language) => {\n            credentials[language] = new LocalizedCredential(bundle, record, language);\n            return credentials;\n        }, {});\n    }\n    localizedCredential(language) {\n        return this.#credentials[language];\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;AAAA,kBAA4C;AAA5C;AACO,IAAM,sBAAN,MAA0B;AAAA,EAK7B,YAAY,QAAQ,QAAQ,UAAU;AAJtC;AACA;AACA;AACA;AALJ;AAOQ,QAAI,CAAC,UAAU;AACX,YAAM,IAAI,MAAM,sBAAsB;AAAA,IAC1C;AACA,uBAAK,SAAU;AACf,SAAK,UAAS,YAAO,SAAS,WAAhB,mBAAyB;AACvC,SAAK,QAAO,YAAO,SAAS,SAAhB,mBAAuB;AAEnC,UAAM,yBAAuB,YAAO,yBAAP,mBAA6B,UACpD,OAAO,uBACP,OAAO,WAAW,IAAI,CAAC,cAAc;AACnC,aAAO,IAAI,uCAA2B,EAAE,GAAG,WAAW,OAAO,GAAG,CAAC;AAAA,IACrE,CAAC;AACL,SAAK,cACD,6DACM,OAAO,CAAC,cAAc,OAAO,oBAAoB,UAAU,IAAI,GAChE,IAAI,CAAC,cAAc;AACpB,YAAM,iBAAiB,OAAO,aAAa,UAAU,IAAI,KAAK,EAAE,MAAM,UAAU,MAAM,MAAM,GAAG;AAC/F,aAAO,IAAI,iBAAiB,WAAW,gBAAgB,QAAQ;AAAA,IACnE,OAAM,CAAC;AAAA,EACf;AAAA,EACA,IAAI,mBAAmB;AA3B3B;AA4BQ,UAAM,QAAO,wBAAK,SAAQ,aAAb,mBAAuB;AACpC,WAAO,KAAK,aAAa,IAAI;AAAA,EACjC;AAAA,EACA,IAAI,qBAAqB;AA/B7B;AAgCQ,UAAM,QAAO,wBAAK,SAAQ,aAAb,mBAAuB;AACpC,WAAO,KAAK,aAAa,IAAI;AAAA,EACjC;AAAA,EACA,aAAa,eAAe;AACxB,QAAI,CAAC,eAAe;AAChB,aAAO;AAAA,IACX;AACA,WAAO,KAAK,WAAW,KAAK,CAAC,cAAc,UAAU,SAAS,aAAa;AAAA,EAC/E;AACJ;AAvCI;AAwCG,IAAM,mBAAN,cAA+B,uCAA2B;AAAA,EAM7D,YAAY,SAAS,gBAAgB,UAAU;AAhDnD;AAiDQ,UAAM,OAAO;AANjB;AACA;AACA;AACA;AACA;AAGI,SAAK,oBAAoB,eAAe;AACxC,SAAK,WAAW,eAAe;AAC/B,SAAK,SAAS,eAAe;AAC7B,SAAK,eAAc,oBAAe,gBAAf,mBAA6B;AAChD,SAAK,SAAQ,oBAAe,UAAf,mBAAuB;AAAA,EACxC;AAAA,EACA,SAAS;AACL,WAAO,EAAE,GAAG,MAAM,OAAO,GAAG,QAAQ,KAAK,QAAQ,aAAa,KAAK,aAAa,OAAO,KAAK,MAAM;AAAA,EACtG;AACJ;AA3DA;AA4DO,IAAM,sBAAN,MAA0B;AAAA,EAE7B,YAAY,QAAQ,QAAQ;AAD5B;AAEI,uBAAK,cAAe,OAAO,UAAU,OAAO,CAAC,aAAa,aAAa;AACnE,kBAAY,QAAQ,IAAI,IAAI,oBAAoB,QAAQ,QAAQ,QAAQ;AACxE,aAAO;AAAA,IACX,GAAG,CAAC,CAAC;AAAA,EACT;AAAA,EACA,oBAAoB,UAAU;AAC1B,WAAO,mBAAK,cAAa,QAAQ;AAAA,EACrC;AACJ;AAVI;",
  "names": []
}
